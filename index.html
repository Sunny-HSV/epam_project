<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Allergy Detector</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                        url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #fff;
            min-height: 100vh;
        }

        .navbar {
            background-color: rgba(44, 62, 80, 0.9);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #3498db;
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
        }

        .auth-btn {
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-btn {
            background: transparent;
            border: 1px solid #3498db;
            color: #3498db;
        }

        .login-btn:hover {
            background: #3498db;
            color: white;
        }

        .signup-btn {
            background: #3498db;
            border: 1px solid #3498db;
            color: white;
        }

        .signup-btn:hover {
            background: #2980b9;
            border-color: #2980b9;
        }

        .container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: #2c3e50;
        }

        .auth-container {
            max-width: 500px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: #2c3e50;
        }

        .auth-container h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #2c3e50;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: 500;
            color: #2c3e50;
        }

        .form-group input {
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            outline: none;
            transition: border 0.3s;
        }

        .form-group input:focus {
            border-color: #3498db;
        }

        .auth-submit-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 1rem;
            transition: background 0.3s;
        }

        .auth-submit-btn:hover {
            background: #27ae60;
        }

        .auth-toggle {
            text-align: center;
            margin-top: 1.5rem;
            color: #7f8c8d;
        }

        .auth-toggle a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }

        .auth-toggle a:hover {
            text-decoration: underline;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        h1 {
            color: #2c3e50;
            font-size: 2rem;
        }

        .user-profile {
            position: relative;
        }

        #profileBtn {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: background 0.3s;
        }

        #profileBtn:hover {
            background: #2980b9;
        }

        .profile-dropdown {
            position: absolute;
            right: 0;
            top: 50px;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 280px;
            z-index: 10;
            display: none;
            border: 1px solid #eee;
        }

        .profile-dropdown h3 {
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: #2c3e50;
        }

        #allergyList {
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .allergy-tag {
            display: inline-flex;
            align-items: center;
            background: #e74c3c;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .remove-allergy {
            margin-left: 0.5rem;
            cursor: pointer;
            font-weight: bold;
        }

        .search-bar {
            margin-bottom: 1.5rem;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 1.2rem;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            transition: border 0.3s;
        }

        .search-bar input:focus {
            border-color: #3498db;
        }

        .restaurant-list,
        .menu-list {
            display: grid;
            gap: 1rem;
        }

        .restaurant-card,
        .menu-item {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid #3498db;
        }

        .restaurant-card:hover,
        .menu-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .restaurant-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            font-size: 1.2rem;
        }

        .restaurant-info {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .menu-item-name {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .menu-item-desc {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .back-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: #2980b9;
        }

        .ingredients-section,
        .allergens-section {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .ingredients-section h3,
        .allergens-section h3 {
            margin-bottom: 1rem;
            color: #2c3e50;
            font-size: 1.2rem;
        }

        #ingredientsList {
            list-style: none;
        }

        .ingredient-item {
            padding: 0.8rem 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .allergen {
            color: #e74c3c;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .allergen-warning {
            background: #fff3f3;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            border-left: 4px solid #e74c3c;
        }

        .warning-high {
            color: #e74c3c;
        }

        .warning-medium {
            color: #f39c12;
        }

        .user-warning {
            color: #e74c3c;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        #newAllergy {
            width: 100%;
            padding: 0.7rem 1rem;
            margin-bottom: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9rem;
            outline: none;
            transition: border 0.3s;
        }

        #newAllergy:focus {
            border-color: #3498db;
        }

        #addAllergyBtn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
            width: 100%;
        }

        #addAllergyBtn:hover {
            background: #27ae60;
        }

        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 0.7rem;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 1rem;
            width: 100%;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        .hidden {
            display: none;
        }

        /* Home page styles */
        .home-container {
            text-align: center;
            padding: 2rem;
        }

        .home-container h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #2c3e50;
        }

        .home-container p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #34495e;
            margin-bottom: 2rem;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #3498db;
        }

        .feature-title {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .feature-desc {
            color: #7f8c8d;
            font-size: 0.95rem;
        }

        /* About page styles */
        .about-container {
            padding: 2rem;
        }

        .about-container h1 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .about-content {
            display: grid;
            gap: 2rem;
        }

        .about-section {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .about-section h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .about-section p {
            color: #34495e;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        /* Contact page styles */
        .contact-container {
            padding: 2rem;
        }

        .contact-container h1 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .form-group textarea {
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            outline: none;
            transition: border 0.3s;
            resize: vertical;
            min-height: 150px;
        }

        .form-group textarea:focus {
            border-color: #3498db;
        }

        .submit-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #2980b9;
        }

        .contact-info {
            margin-top: 2rem;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .contact-info h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .contact-info p {
            color: #34495e;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                padding: 1rem;
            }

            .nav-links {
                margin-top: 1rem;
                gap: 1rem;
                flex-direction: column;
            }

            .auth-buttons {
                width: 100%;
                justify-content: space-between;
            }

            .auth-btn {
                width: 48%;
                text-align: center;
            }

            .container, .auth-container {
                margin: 1rem;
                padding: 1.5rem;
            }

            header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .profile-dropdown {
                width: 100%;
                right: auto;
                left: 0;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="#" class="logo">Food Allergy Detector</a>
        <div class="nav-links" id="navLinks">
            <a href="#" class="nav-link" data-view="home">Home</a>
            <a href="#" class="nav-link" data-view="restaurants">Restaurants</a>
            <a href="#" class="nav-link" data-view="about">About</a>
            <a href="#" class="nav-link" data-view="contact">Contact</a>
            <div class="auth-buttons" id="authButtons">
                <button class="auth-btn login-btn" id="loginBtn">Login</button>
                <button class="auth-btn signup-btn" id="signupBtn">Sign Up</button>
            </div>
        </div>
    </nav>

    <!-- Main App Container -->
    <div class="container hidden" id="mainContainer">
        <header>
            <h1>Food Allergy Detector</h1>
            <div class="user-profile">
                <button id="profileBtn">üë§ My Profile</button>
                <div class="profile-dropdown" id="profileDropdown">
                    <h3>Your Allergies</h3>
                    <div id="allergyList"></div>
                    <input type="text" id="newAllergy" placeholder="Enter an allergen (e.g., peanuts)">
                    <button id="addAllergyBtn">Add Allergy</button>
                    <button class="logout-btn" id="logoutBtn">Logout</button>
                </div>
            </div>
        </header>

        <main>
            <!-- Home View -->
            <div class="home-view hidden" id="homeView">
                <div class="home-container">
                    <h1>Welcome to Food Allergy Detector</h1>
                    <p>Your safety is our priority. Detect potential allergens in your food before you order.</p>
                    
                    <div class="features">
                        <div class="feature-card">
                            <div class="feature-icon">üîç</div>
                            <h3 class="feature-title">Allergen Detection</h3>
                            <p class="feature-desc">Scan menu items for common allergens and ingredients that might cause reactions.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üì±</div>
                            <h3 class="feature-title">Personalized Profile</h3>
                            <p class="feature-desc">Create a profile with your specific allergies for customized warnings.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üçΩÔ∏è</div>
                            <h3 class="feature-title">Restaurant Database</h3>
                            <p class="feature-desc">Access allergen information from hundreds of restaurants in your area.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Restaurants View -->
            <div class="restaurants-view hidden" id="restaurantsView">
                <h2>Nearby Restaurants</h2>
                <div class="search-bar">
                    <input type="text" id="searchRestaurant" placeholder="Search restaurants by name or cuisine...">
                </div>
                <div class="restaurant-list" id="restaurantList"></div>
            </div>

            <div class="menu-view hidden" id="menuView">
                <button id="backToRestaurants" class="back-btn">‚Üê Back to restaurants</button>
                <h2 id="restaurantName"></h2>
                <div class="menu-list" id="menuList"></div>
            </div>

            <div class="item-view hidden" id="itemView">
                <button id="backToMenu" class="back-btn">‚Üê Back to menu</button>
                <h2 id="itemName"></h2>
                <div class="ingredients-section">
                    <h3>Ingredients</h3>
                    <ul id="ingredientsList"></ul>
                </div>
                <div class="allergens-section hidden" id="allergensSection">
                    <h3>‚ö†Ô∏è Allergy Warnings</h3>
                    <div id="allergensList"></div>
                </div>
            </div>

            <!-- About View -->
            <div class="about-view hidden" id="aboutView">
                <div class="about-container">
                    <h1>About Food Allergy Detector</h1>
                    <div class="about-content">
                        <div class="about-section">
                            <h2>Our Mission</h2>
                            <p>Food Allergy Detector was created to help people with food allergies navigate dining out safely. We understand the challenges of managing food allergies and aim to provide a reliable tool that helps identify potential allergens in restaurant meals.</p>
                        </div>
                        <div class="about-section">
                            <h2>How It Works</h2>
                            <p>Our system analyzes menu items from participating restaurants and checks ingredients against a comprehensive allergen database. When you create a profile with your specific allergies, we provide personalized warnings about menu items that may contain those allergens.</p>
                        </div>
                        <div class="about-section">
                            <h2>Our Team</h2>
                            <p>We're a team of developers, nutritionists, and allergy specialists dedicated to making dining out safer for everyone. Our technology is constantly updated to reflect the latest research in food allergies and ingredient information.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact View -->
            <div class="contact-view hidden" id="contactView">
                <div class="contact-container">
                    <h1>Contact Us</h1>
                    <div class="contact-form">
                        <form id="contactForm">
                            <div class="form-group">
                                <label for="contactName">Name</label>
                                <input type="text" id="contactName" required placeholder="Your name">
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email</label>
                                <input type="email" id="contactEmail" required placeholder="Your email">
                            </div>
                            <div class="form-group">
                                <label for="contactMessage">Message</label>
                                <textarea id="contactMessage" required placeholder="Your message"></textarea>
                            </div>
                            <button type="submit" class="submit-btn">Send Message</button>
                        </form>
                    </div>
                    <div class="contact-info">
                        <h2>Other Ways to Reach Us</h2>
                        <p><strong>Email:</strong> support@foodallergydetector.com</p>
                        <p><strong>Phone:</strong> (555) 123-4567</p>
                        <p><strong>Address:</strong> 123 Safety Street, Allergy City, AC 12345</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Auth Containers -->
    <div class="auth-container hidden" id="loginContainer">
        <h2>Login to Your Account</h2>
        <form class="auth-form" id="loginForm">
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" required placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" required placeholder="Enter your password">
            </div>
            <button type="submit" class="auth-submit-btn">Login</button>
        </form>
        <div class="auth-toggle">
            Don't have an account? <a href="#" id="showSignup">Sign up</a>
        </div>
    </div>

    <div class="auth-container hidden" id="signupContainer">
        <h2>Create Your Account</h2>
        <form class="auth-form" id="signupForm">
            <div class="form-group">
                <label for="signupName">Full Name</label>
                <input type="text" id="signupName" required placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label for="signupEmail">Email</label>
                <input type="email" id="signupEmail" required placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" required placeholder="Create a password">
            </div>
            <div class="form-group">
                <label for="signupConfirmPassword">Confirm Password</label>
                <input type="password" id="signupConfirmPassword" required placeholder="Confirm your password">
            </div>
            <button type="submit" class="auth-submit-btn">Sign Up</button>
        </form>
        <div class="auth-toggle">
            Already have an account? <a href="#" id="showLogin">Login</a>
        </div>
    </div>

    <script>
        const restaurants = [
            {
                id: 1,
                name: "Spice Garden",
                cuisine: "Indian",
                distance: "0.5 km",
                rating: 4.5,
                menu: [
                    {
                        id: 101,
                        name: "Hyderabadi Biryani",
                        description: "Fragrant basmati rice cooked with tender meat and aromatic spices",
                        ingredients: ["basmati rice", "chicken", "onions", "yogurt (milk)", "mint", "coriander", "birista", "spices"]
                    },
                    {
                        id: 102,
                        name: "Mirchi Ka Salan",
                        description: "Spicy chili curry with peanut and sesame sauce",
                        ingredients: ["green chilies", "peanuts", "sesame seeds", "coconut", "tamarind", "spices"]
                    },
                    {
                        id: 103,
                        name: "Double Ka Meetha",
                        description: "Bread pudding dessert with dry fruits",
                        ingredients: ["bread", "milk", "sugar", "ghee", "cashews (tree nuts)", "raisins", "cardamom"]
                    },
                    {
                        id: 104,
                        name: "Paneer Tikka",
                        description: "Grilled cottage cheese cubes with spices",
                        ingredients: ["paneer (milk)", "bell peppers", "onions", "yogurt (milk)", "spices"]
                    }
                ]
            },
            {
                id: 2,
                name: "Andhra Spice",
                cuisine: "Andhra",
                distance: "1.2 km",
                rating: 4.2,
                menu: [
                    {
                        id: 201,
                        name: "Andhra Thali",
                        description: "Complete meal with rice, sambar, rasam, curd and vegetables",
                        ingredients: ["rice", "toor dal", "tamarind", "vegetables", "yogurt (milk)", "mustard seeds", "curry leaves"]
                    },
                    {
                        id: 202,
                        name: "Gongura Pachadi",
                        description: "Tangy sorrel leaves chutney with spices",
                        ingredients: ["sorrel leaves", "red chilies", "garlic", "mustard seeds", "oil"]
                    },
                    {
                        id: 203,
                        name: "Royyala Iguru",
                        description: "Spicy prawns curry with Andhra flavors",
                        ingredients: ["prawns (shellfish)", "onions", "tomatoes", "coconut", "spices"]
                    },
                    {
                        id: 204,
                        name: "Pesarattu",
                        description: "Green gram dosa with ginger chutney",
                        ingredients: ["green gram", "rice", "ginger", "green chilies", "oil"]
                    }
                ]
            },
            {
                id: 3,
                name: "Chennai Cafe",
                cuisine: "South Indian",
                distance: "2.0 km",
                rating: 4.0,
                menu: [
                    {
                        id: 301,
                        name: "Masala Dosa",
                        description: "Crispy rice crepe with spiced potato filling",
                        ingredients: ["rice batter", "urad dal", "potatoes", "onions", "mustard seeds", "curry leaves", "oil"]
                    },
                    {
                        id: 302,
                        name: "Filter Coffee",
                        description: "Traditional South Indian coffee with milk",
                        ingredients: ["coffee powder", "milk", "sugar"]
                    },
                    {
                        id: 303,
                        name: "Idli Sambar",
                        description: "Steamed rice cakes with lentil stew",
                        ingredients: ["rice", "urad dal", "toor dal", "vegetables", "tamarind", "spices"]
                    },
                    {
                        id: 304,
                        name: "Vada",
                        description: "Crispy fried lentil donuts",
                        ingredients: ["urad dal", "onions", "green chilies", "curry leaves", "oil"]
                    }
                ]
            },
            {
                id: 4,
                name: "Punjabi Dhaba",
                cuisine: "North Indian",
                distance: "1.5 km",
                rating: 4.3,
                menu: [
                    {
                        id: 401,
                        name: "Butter Chicken",
                        description: "Tandoori chicken in creamy tomato gravy",
                        ingredients: ["chicken", "tomatoes", "cream (milk)", "butter (milk)", "spices"]
                    },
                    {
                        id: 402,
                        name: "Dal Makhani",
                        description: "Creamy black lentils with butter",
                        ingredients: ["black lentils", "kidney beans", "cream (milk)", "butter (milk)", "spices"]
                    },
                    {
                        id: 403,
                        name: "Palak Paneer",
                        description: "Spinach with cottage cheese cubes",
                        ingredients: ["spinach", "paneer (milk)", "cream (milk)", "spices"]
                    },
                    {
                        id: 404,
                        name: "Gulab Jamun",
                        description: "Milk solids dumplings in sugar syrup",
                        ingredients: ["milk powder", "flour", "sugar", "ghee", "cardamom"]
                    }
                ]
            },
            {
                id: 5,
                name: "Coastal Delight",
                cuisine: "Seafood",
                distance: "2.5 km",
                rating: 4.1,
                menu: [
                    {
                        id: 501,
                        name: "Fish Curry",
                        description: "Spicy coconut-based fish curry",
                        ingredients: ["fish (seabass)", "coconut", "tamarind", "spices"]
                    },
                    {
                        id: 502,
                        name: "Prawns Masala",
                        description: "Juicy prawns in onion-tomato gravy",
                        ingredients: ["prawns (shellfish)", "onions", "tomatoes", "spices"]
                    },
                    {
                        id: 503,
                        name: "Crab Fry",
                        description: "Spicy fried crab with masala",
                        ingredients: ["crab (shellfish)", "onions", "garlic", "spices"]
                    },
                    {
                        id: 504,
                        name: "Squid Roast",
                        description: "Tender squid pieces in spicy masala",
                        ingredients: ["squid", "onions", "tomatoes", "spices"]
                    }
                ]
            }
        ];

        const allergenDatabase = {
            'peanuts': { severity: 'high', description: 'Can cause severe reactions' },
            'tree nuts': { severity: 'high', description: 'Includes almonds, walnuts, cashews etc.' },
            'milk': { severity: 'medium', description: 'Dairy products' },
            'eggs': { severity: 'medium', description: 'Common in many dishes' },
            'wheat': { severity: 'medium', description: 'Contains gluten' },
            'soy': { severity: 'medium', description: 'Common in processed foods' },
            'fish': { severity: 'high', description: 'Includes salmon, tuna, etc.' },
            'shellfish': { severity: 'high', description: 'Includes shrimp, crab, lobster' },
            'sesame': { severity: 'medium', description: 'Common in Asian cuisine' }
        };

        // DOM Elements
        const mainContainer = document.getElementById('mainContainer');
        const homeView = document.getElementById('homeView');
        const restaurantsView = document.getElementById('restaurantsView');
        const menuView = document.getElementById('menuView');
        const itemView = document.getElementById('itemView');
        const aboutView = document.getElementById('aboutView');
        const contactView = document.getElementById('contactView');
        const restaurantList = document.getElementById('restaurantList');
        const menuList = document.getElementById('menuList');
        const restaurantName = document.getElementById('restaurantName');
        const itemName = document.getElementById('itemName');
        const ingredientsList = document.getElementById('ingredientsList');
        const allergensSection = document.getElementById('allergensSection');
        const allergensList = document.getElementById('allergensList');
        const backToRestaurants = document.getElementById('backToRestaurants');
        const backToMenu = document.getElementById('backToMenu');
        const profileBtn = document.getElementById('profileBtn');
        const profileDropdown = document.getElementById('profileDropdown');
        const allergyList = document.getElementById('allergyList');
        const newAllergy = document.getElementById('newAllergy');
        const addAllergyBtn = document.getElementById('addAllergyBtn');
        const searchRestaurant = document.getElementById('searchRestaurant');
        const logoutBtn = document.getElementById('logoutBtn');
        const navLinks = document.getElementById('navLinks');
        const authButtons = document.getElementById('authButtons');
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const loginContainer = document.getElementById('loginContainer');
        const signupContainer = document.getElementById('signupContainer');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const showLogin = document.getElementById('showLogin');
        const showSignup = document.getElementById('showSignup');
        const contactForm = document.getElementById('contactForm');

        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let currentUserAllergies = [];
        let selectedRestaurant = null;
        let selectedMenuItem = null;

        function init() {
            if (currentUser) {
                showMainApp();
                currentUserAllergies = currentUser.allergies || ['peanuts', 'tree nuts', 'milk'];
                showView('home');
                renderUserAllergies();
            } else {
                showAuthButtons();
            }

            // Event listeners for auth buttons
            loginBtn.addEventListener('click', showLoginForm);
            signupBtn.addEventListener('click', showSignupForm);
            showLogin.addEventListener('click', showLoginForm);
            showSignup.addEventListener('click', showSignupForm);

            // Form submissions
            loginForm.addEventListener('submit', handleLogin);
            signupForm.addEventListener('submit', handleSignup);
            contactForm.addEventListener('submit', handleContactSubmit);

            // Navigation
            backToRestaurants.addEventListener('click', () => {
                menuView.classList.add('hidden');
                restaurantsView.classList.remove('hidden');
            });

            backToMenu.addEventListener('click', () => {
                itemView.classList.add('hidden');
                menuView.classList.remove('hidden');
            });

            // Profile and allergies
            profileBtn.addEventListener('click', toggleProfileDropdown);
            addAllergyBtn.addEventListener('click', addUserAllergy);
            searchRestaurant.addEventListener('input', filterRestaurants);
            logoutBtn.addEventListener('click', handleLogout);

            // Navigation links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const view = e.target.getAttribute('data-view');
                    if (currentUser) {
                        showView(view);
                    } else {
                        alert('Please login or sign up to access this feature');
                        showLoginForm();
                    }
                });
            });
        }

        function showView(view) {
            // Hide all views first
            homeView.classList.add('hidden');
            restaurantsView.classList.add('hidden');
            menuView.classList.add('hidden');
            itemView.classList.add('hidden');
            aboutView.classList.add('hidden');
            contactView.classList.add('hidden');

            // Show the requested view
            switch(view) {
                case 'home':
                    homeView.classList.remove('hidden');
                    break;
                case 'restaurants':
                    restaurantsView.classList.remove('hidden');
                    renderRestaurants();
                    break;
                case 'about':
                    aboutView.classList.remove('hidden');
                    break;
                case 'contact':
                    contactView.classList.remove('hidden');
                    break;
                default:
                    homeView.classList.remove('hidden');
            }
        }

        function showMainApp() {
            authButtons.classList.add('hidden');
            loginContainer.classList.add('hidden');
            signupContainer.classList.add('hidden');
            mainContainer.classList.remove('hidden');
        }

        function showAuthButtons() {
            authButtons.classList.remove('hidden');
            loginContainer.classList.add('hidden');
            signupContainer.classList.add('hidden');
            mainContainer.classList.add('hidden');
        }

        function showLoginForm(e) {
            if (e) e.preventDefault();
            authButtons.classList.add('hidden');
            loginContainer.classList.remove('hidden');
            signupContainer.classList.add('hidden');
            mainContainer.classList.add('hidden');
        }

        function showSignupForm(e) {
            if (e) e.preventDefault();
            authButtons.classList.add('hidden');
            loginContainer.classList.add('hidden');
            signupContainer.classList.remove('hidden');
            mainContainer.classList.add('hidden');
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                currentUserAllergies = currentUser.allergies || ['peanuts', 'tree nuts', 'milk'];
                showMainApp();
                showView('home');
                renderUserAllergies();
                loginForm.reset();
            } else {
                alert('Invalid email or password');
            }
        }

        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;

            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }

            const users = JSON.parse(localStorage.getItem('users')) || [];
            if (users.some(u => u.email === email)) {
                alert('User with this email already exists');
                return;
            }

            const newUser = {
                id: Date.now(),
                name,
                email,
                password,
                allergies: ['peanuts', 'tree nuts', 'milk']
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            currentUserAllergies = currentUser.allergies;
            
            showMainApp();
            showView('home');
            renderUserAllergies();
            
            signupForm.reset();
        }

        function handleContactSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;
            
            // In a real app, you would send this data to a server
            alert(`Thank you for your message, ${name}! We'll get back to you soon.`);
            contactForm.reset();
        }

        function handleLogout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            showAuthButtons();
            profileDropdown.style.display = 'none';
        }

        function saveAllergies() {
            if (currentUser) {
                currentUser.allergies = currentUserAllergies;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex].allergies = currentUserAllergies;
                    localStorage.setItem('users', JSON.stringify(users));
                }
            }
        }

        function renderRestaurants(filter = '') {
            restaurantList.innerHTML = '';

            const filtered = restaurants.filter(restaurant =>
                restaurant.name.toLowerCase().includes(filter.toLowerCase()) ||
                restaurant.cuisine.toLowerCase().includes(filter.toLowerCase())
            );

            filtered.forEach(restaurant => {
                const restaurantCard = document.createElement('div');
                restaurantCard.className = 'restaurant-card';
                restaurantCard.innerHTML = `
                    <div class="restaurant-name">${restaurant.name}</div>
                    <div class="restaurant-info">${restaurant.cuisine} ‚Ä¢ ${restaurant.distance} ‚Ä¢ ‚òÖ ${restaurant.rating}</div>
                `;
                restaurantCard.addEventListener('click', () => showMenu(restaurant));
                restaurantList.appendChild(restaurantCard);
            });
        }

        function filterRestaurants() {
            renderRestaurants(searchRestaurant.value);
        }

        function showMenu(restaurant) {
            selectedRestaurant = restaurant;
            restaurantName.textContent = restaurant.name;
            menuList.innerHTML = '';

            restaurant.menu.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.innerHTML = `
                    <div class="menu-item-name">${item.name}</div>
                    <div class="menu-item-desc">${item.description}</div>
                `;
                menuItem.addEventListener('click', () => showMenuItem(item));
                menuList.appendChild(menuItem);
            });

            restaurantsView.classList.add('hidden');
            menuView.classList.remove('hidden');
        }

        function showMenuItem(item) {
            selectedMenuItem = item;
            itemName.textContent = item.name;
            ingredientsList.innerHTML = '';

            const allergens = checkForAllergens(item.ingredients);

            item.ingredients.forEach(ingredient => {
                const li = document.createElement('li');
                li.className = 'ingredient-item';

                const isAllergen = allergens.some(a => ingredient.toLowerCase().includes(a.allergen.toLowerCase()));

                li.innerHTML = ingredient;
                if (isAllergen) {
                    li.innerHTML += ` <span class="allergen">(contains ${allergens.find(a => ingredient.toLowerCase().includes(a.allergen.toLowerCase())).allergen})</span>`;
                }

                ingredientsList.appendChild(li);
            });

            if (allergens.length > 0) {
                allergensSection.classList.remove('hidden');
                allergensList.innerHTML = '';

                allergens.forEach(allergen => {
                    const warning = document.createElement('div');
                    warning.className = `allergen-warning warning-${allergen.severity}`;
                    warning.innerHTML = `
                        <strong>${allergen.allergen.toUpperCase()} (${allergen.severity} risk)</strong>
                        <p>${allergen.description}</p>
                        ${allergen.userSpecific ? '<p class="user-warning">‚ö†Ô∏è This matches one of your specified allergies!</p>' : ''}
                    `;
                    allergensList.appendChild(warning);
                });
            } else {
                allergensSection.classList.add('hidden');
            }

            menuView.classList.add('hidden');
            itemView.classList.remove('hidden');
        }

        function checkForAllergens(ingredients) {
            const foundAllergens = [];

            ingredients.forEach(ingredient => {
                for (const [allergen, info] of Object.entries(allergenDatabase)) {
                    if (ingredient.toLowerCase().includes(allergen.toLowerCase())) {
                        foundAllergens.push({
                            allergen,
                            severity: info.severity,
                            description: info.description,
                            ingredient,
                            userSpecific: false
                        });
                    }
                }

                currentUserAllergies.forEach(userAllergy => {
                    if (ingredient.toLowerCase().includes(userAllergy.toLowerCase())) {
                        foundAllergens.push({
                            allergen: userAllergy,
                            severity: 'high',
                            description: 'You have specifically marked this as an allergy',
                            ingredient,
                            userSpecific: true
                        });
                    }
                });
            });

            return foundAllergens.filter((allergen, index, self) =>
                index === self.findIndex(a =>
                    a.allergen === allergen.allergen &&
                    a.ingredient === allergen.ingredient
                )
            );
        }

        function toggleProfileDropdown() {
            profileDropdown.style.display = profileDropdown.style.display === 'block' ? 'none' : 'block';
        }

        function renderUserAllergies() {
            allergyList.innerHTML = '';
            currentUserAllergies.forEach(allergy => {
                const tag = document.createElement('div');
                tag.className = 'allergy-tag';
                tag.textContent = allergy;
                
                const removeBtn = document.createElement('span');
                removeBtn.className = 'remove-allergy';
                removeBtn.innerHTML = '&times;';
                removeBtn.addEventListener('click', () => {
                    currentUserAllergies = currentUserAllergies.filter(a => a !== allergy);
                    renderUserAllergies();
                    saveAllergies();
                });
                
                tag.appendChild(removeBtn);
                allergyList.appendChild(tag);
            });
            
            if (currentUserAllergies.length === 0) {
                allergyList.innerHTML = '<p class="empty-message">No allergies added yet</p>';
            }
        }

        function addUserAllergy() {
            const allergy = newAllergy.value.trim();
            if (allergy && !currentUserAllergies.includes(allergy)) {
                currentUserAllergies.push(allergy);
                newAllergy.value = '';
                renderUserAllergies();
                saveAllergies();
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!profileBtn.contains(e.target) && !profileDropdown.contains(e.target)) {
                profileDropdown.style.display = 'none';
            }
        });

        // Initialize the app
        init();
    </script>
</body>
</html>